<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <table class="w-full text-sm text-left rtl:text-right text-gray-500">
        @defer (when data) {
        @if (data.content.length > 0) {
        <thead class="text-xs text-white uppercase bg-black-primary">
            <tr>
                <th scope="col" class="px-6 py-3">
                    Nombre
                </th>
                <th scope="col" class="px-6 py-3 w-20">
                    <span class="sr-only">Opciones</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <div #tableLoaderPage id="tableLoaderPage"
                class="absolute inset-x-0 bottom-0 h-full bg-black bg-opacity-30 justify-center animate-opacityIn hidden">
                <app-loader-spinner class="flex items-center"></app-loader-spinner>
            </div>
            <!-- Verificar si data y data.content están definidos -->
            <ng-container *ngIf="data && data.content">
                <tr *ngFor="let item of data.content; let i = index" class="bg-white border-b hover:bg-gray-50">
                    <th scope="row" class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap cursor-pointer">
                        {{ item.name }}
                    </th>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <button *ngIf="item.id" (click)="toggleAccordion(item.id!)"
                            class="text-gray-500 hover:text-gray-900 focus:outline-none focus:text-gray-900">
                            Ver años escolares
                        </button>
                        <div *ngIf="openAccordionId === item.id">
                            <ng-container *ngFor="let schoolYear of schoolYears?.content">
                                <div class="flex items-center" *ngIf="schoolYear && schoolYear.id">
                                    <p class="mr-2">{{ schoolYear.name }}</p>
                                    <button
                                        class="text-white font-semibold py-2 px-4 rounded-lg bg-green-500 hover:bg-green-600 focus:outline-none focus:bg-green-700 mt-1 mb-1"
                                        style="background-color: #57ad57;" (click)="verDetalleCurso(schoolYear.id)">
                                        Ver Respuestas
                                    </button>

                                </div>
                            </ng-container>
                        </div>
                    </td>
                </tr>
            </ng-container>
        </tbody>
        } @else {
        <thead class="text-xs text-white uppercase bg-black-primary">
            <tr>
                <th scope="col" class="px-6 py-3">
                    Registros
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="bg-white border-b hover:bg-gray-50">
                <td scope="row" class="w-full px-6 py-4 font-medium text-center text-black-primary whitespace-nowrap">
                    Ningún elemento para mostrar
                </td>
            </tr>
        </tbody>
        }
        } @placeholder (minimum 0.5s) {
        <thead class="text-xs text-white uppercase bg-black-primary">
            <tr>
                <th scope="col" class="px-6 py-3">
                    Cargando
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="bg-white border-b hover:bg-gray-50">
                <td scope="row"
                    class="w-full px-6 py-4 font-medium text-center text-black-primary whitespace-nowrap flex justify-center my-4">
                    <app-loader-spinner></app-loader-spinner>
                </td>
            </tr>
        </tbody>
        }
    </table>
</div>

<app-pagination [data]="data" (nextPageEvent)="handleNextPage()"
    (previousPageEvent)="handlePreviousPage()"></app-pagination>