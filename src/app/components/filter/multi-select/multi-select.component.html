<div class="relative inline-block w-full" (click)="$event.stopPropagation()">
  <button (click)="toggleDropdown($event)"
    class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm text-left">
    {{ getSelectedOptionNames() || placeholder }}
  </button>

  <div *ngIf="isOpen" class="absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg p-2">
    <div *ngFor="let group of groupedOptions" class="mb-2">
      <div class="font-bold border-b border-gray-300 mb-1">{{ group.institutionName }}</div>
      <div *ngFor="let option of group.options" (click)="toggleOption(option, $event)" 
        [class.selected]="selectedOptions.includes(option)"
        class="inline-block px-4 py-2 m-1 cursor-pointer border border-black rounded-md">
        {{ option.name }}
      </div>
    </div>
  </div>
</div>
