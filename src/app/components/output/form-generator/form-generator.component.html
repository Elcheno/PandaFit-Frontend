<div class="grid grid-rows-2 gap-2 text-black-primary">
    <div class="overflow-x-auto">
        <div [style.background-color]="status().error?'rgb(220, 197, 197)':'rgb(229 231 235)'"
            class="flex flex-col canvas example-list rounded-xl p-1 overflow-x-scroll" cdkDropList
            cdkDropListOrientation="horizontal" (cdkDropListDropped)="onDrop($event)">

            <div class="mb-1 sticky top-0 left-0">
                <div class="text-black-primary p-2 h-8 bg-gray-300 rounded-xl flex items-center w-full">{{ inputBuffer }}</div>
            </div>

            <div class="flex content-start">
                <div *ngFor="let item of items" cdkDragBoundary=".canvas" cdkDrag [attr.data-id]="item.id"
                    class="items example-box rounded-lg flex justify-between items-center p-1"
                    (click)="selectItem(item)" 
                    [class]="item.selected ? 'bg-green-light' : 'bg-white'">
                    {{ item.text }}
                    @if (item.selected) {
                        <button class="m-1 text-black-secondary hover:text-red-600" (click)="deleteItem(item)">
                            <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                                viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                            </svg>
                        </button>
                    }
                </div>
            </div>

        </div>
    </div>

    <div class="grid grid-cols-2 bg-gray-50 p-4 gap-6 rounded-xl">
        <div class="grid grid-cols-3 gap-1 btn-parent">

            <app-dropdown 
                class="col-span-3" 
                [rows]="dropdownData"
                [triggerStyle]="'bg-green-primary p-1 rounded-lg text-white hover:bg-green-light cursor-default w-full'">
            </app-dropdown>

            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.sqrt(',')')">√</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.pow(',',',')')">^</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('average(',')')">Avg</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('(')">(</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey(')')">)</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.round(',')')">Round</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.floor(',')')">Floor</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.ceil(',')')">Ceil</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.sin(',')')">Sin</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.cos(',')')">Cos</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.tan(',')')">Tan</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('Math.log(',')')">Log</button>
        </div>
        <div class="grid grid-cols-3 gap-1 btn-parent">
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('1')">1</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('2')">2</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('3')">3</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('4')">4</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('5')">5</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('6')">6</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('7')">7</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('8')">8</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('9')">9</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('0')">0</button>
            <button type="button" class="bg-gray-100 p-1 rounded-lg hover:bg-gray-200 cursor-default"
                (click)="handleKeyNumber('.')">.</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('+')">+</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('-')">-</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('*')">*</button>
            <button type="button" class="bg-gray-200 p-1 rounded-lg hover:bg-gray-300 cursor-default"
                (click)="handleKey('/')">/</button>
        </div>
    </div>
    <div>
        <buttonComp 
            (click)="checkSintaxis()" 
            [text]="'Comprobar fórmula'" 
            [buttonStyle]="'w-full'">
        </buttonComp>
    </div>
</div>